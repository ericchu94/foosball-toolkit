{
  "db": "PostgreSQL",
  "0ff86cfff4c8d1ccf5dfa8c569d358d1893abf6062b36396715118cc807be411": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "UPDATE player SET first_name = $1, last_name = $2 WHERE id = $3"
  },
  "17afea837104c259b4269f80d137f17ac9bc8cb281cd08652bc89c3a4c8c2662": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "player_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "match_id",
          "ordinal": 2,
          "type_info": "Int4"
        },
        {
          "name": "before_rating",
          "ordinal": 3,
          "type_info": "Int4"
        },
        {
          "name": "after_rating",
          "ordinal": 4,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "SELECT * FROM rating WHERE player_id = $1 AND match_id = $2"
  },
  "1cd6971890bd327c596a83cba214edaf32d8ec10ed20e6fa839771deb5ec5627": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "first_name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT * FROM player ORDER BY id ASC"
  },
  "20a2bb307b53a88062743b8624db24738a33bbc78261b395af2f0898871bf935": {
    "describe": {
      "columns": [
        {
          "name": "tournament_name",
          "ordinal": 0,
          "type_info": "Text"
        },
        {
          "name": "id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "winner",
          "ordinal": 3,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "none",
                  "team1",
                  "team2",
                  "draw"
                ]
              },
              "name": "winner"
            }
          }
        },
        {
          "name": "first_name",
          "ordinal": 4,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 5,
          "type_info": "Text"
        },
        {
          "name": "before_rating",
          "ordinal": 6,
          "type_info": "Int4"
        },
        {
          "name": "after_rating",
          "ordinal": 7,
          "type_info": "Int4"
        },
        {
          "name": "team",
          "ordinal": 8,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "team1",
                  "team2"
                ]
              },
              "name": "team"
            }
          }
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "SELECT t.name as tournament_name, m.id, m.timestamp, m.winner, p.first_name, p.last_name, r.before_rating, r.after_rating, pm.team FROM match m\n            JOIN player_match pm ON pm.match_id = m.id\n            JOIN rating r on r.match_id = m.id AND r.player_id = pm.player_id\n            JOIN player p on p.id = pm.player_id\n            JOIN tournament t on t.id = m.tournament_id\n            WHERE m.id IN (SELECT id FROM match ORDER BY timestamp DESC LIMIT $1 OFFSET $2)"
  },
  "213955a68eb6607bd2dba903b14e30c9b94f82924d3d1562ac6737501fe7aac0": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4Array",
          "Int4Array",
          "Int4Array",
          "Int4Array"
        ]
      }
    },
    "query": "INSERT INTO rating (player_id, match_id, before_rating, after_rating) SELECT * FROM UNNEST($1::int[], $2::int[], $3::int[], $4::int[])"
  },
  "216a9f55c77411f890695d6248f3d95098aee5c64e282af0f4619b5e41dd9fb1": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "tournament_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "winner",
          "ordinal": 3,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "none",
                  "team1",
                  "team2",
                  "draw"
                ]
              },
              "name": "winner"
            }
          }
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT * FROM match WHERE NOT EXISTS (SELECT 1 FROM rating WHERE match_id = id) ORDER BY timestamp ASC LIMIT 1"
  },
  "250cea2644137f696124b0c8ddd64284c1b6cbe136103da464a260ecbb71f3e3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "player_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "match_id",
          "ordinal": 2,
          "type_info": "Int4"
        },
        {
          "name": "before_rating",
          "ordinal": 3,
          "type_info": "Int4"
        },
        {
          "name": "after_rating",
          "ordinal": 4,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        true,
        true,
        true,
        true,
        true
      ],
      "parameters": {
        "Left": [
          "Int4Array"
        ]
      }
    },
    "query": "SELECT r.* FROM rating r\n        JOIN (\n            SELECT MAX(id) id, player_id FROM rating r\n            WHERE player_id = ANY($1)\n            GROUP BY player_id\n        ) sub ON r.id = sub.id AND r.player_id = sub.player_id"
  },
  "25206cca3430f7978c6f6ded03de8c223a0664e0fe18671dafabde356901d295": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "first_name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "license",
          "ordinal": 3,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT * FROM fast_player WHERE license = $1"
  },
  "25bc5c8b35d5f78cc3cd860530164c0bb825d478f9c96ffe2a20d6747a6bdb0f": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO tournament (name, source) VALUES ($1, $2) ON CONFLICT DO NOTHING"
  },
  "273489a807c13d68d6ee8f819afccb13c586be33b00f492eeede3f462015a24a": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "UPDATE player_match SET player_id = $1 WHERE player_id = $2"
  },
  "337ed72ebeeb8540beb7cb662561660d9e240f61ee7000214ce201285642526f": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "TextArray",
          "TextArray",
          "TextArray"
        ]
      }
    },
    "query": "INSERT INTO fast_player (license, first_name, last_name) SELECT * FROM UNNEST($1::text[], $2::text[], $3::text[])"
  },
  "366e289bb8296a771bd937cd1441900abb8b0b62e090586d31e5f8d18bd713ed": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO player (first_name, last_name) VALUES ($1, $2) ON CONFLICT DO NOTHING"
  },
  "3877c6145ec6719c1581974eb816718b5eff3e2c3877f8631229be6807c36ee6": {
    "describe": {
      "columns": [
        {
          "name": "player_id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "match_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "team",
          "ordinal": 2,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "team1",
                  "team2"
                ]
              },
              "name": "team"
            }
          }
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "SELECT * FROM player_match WHERE match_id = $1"
  },
  "3ab350c138cfb67cb6340282e0a1f8308c93d622e253479d73bebc45d1efad4b": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "source",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "SELECT * FROM tournament WHERE id = $1"
  },
  "54cb57012a9d2bac0bda59ec578d96da17ad2358ea83e445a93ccbe15bd2dd53": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO player (first_name, last_name) VALUES ($1, $2)"
  },
  "690415a543e09ec2086f933c17c567ea37d705bc0fc9867cfc48e5fe5c16c261": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "tournament_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "winner",
          "ordinal": 3,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "none",
                  "team1",
                  "team2",
                  "draw"
                ]
              },
              "name": "winner"
            }
          }
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "SELECT * FROM match ORDER BY timestamp DESC LIMIT $1 OFFSET $2"
  },
  "6adfed5dd9c1ba7362c819bc3ff0b5e95d2296c32d8ab59b97596276147a1a3b": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "first_name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "SELECT * FROM player WHERE id = $1"
  },
  "77a4eff23e7e109fffe56919f99306d04a706be299f7f1cd6d4cdbec047a1d23": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "player_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "match_id",
          "ordinal": 2,
          "type_info": "Int4"
        },
        {
          "name": "before_rating",
          "ordinal": 3,
          "type_info": "Int4"
        },
        {
          "name": "after_rating",
          "ordinal": 4,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "SELECT rating.* FROM rating JOIN match ON match_id = match.id WHERE player_id = $1 ORDER BY timestamp DESC LIMIT 1"
  },
  "8bda24c1160f9129f4a4c22303b5012180b2b8ebb23bc596007d8531469673b7": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "source",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT * FROM tournament"
  },
  "8c750e4e8191c556694a28f3661fdab1e54ab0380e3b93c52584ecafaf1a2e67": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "source",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "SELECT * FROM tournament WHERE name = $1 AND source = $2"
  },
  "9d684b40ff8ac3daf5058cc83ea5b559ef91d83061774c98d10db003c6fd218d": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "tournament_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "winner",
          "ordinal": 3,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "none",
                  "team1",
                  "team2",
                  "draw"
                ]
              },
              "name": "winner"
            }
          }
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT * FROM match WHERE NOT EXISTS (SELECT 1 FROM rating WHERE match_id = id) ORDER BY timestamp ASC"
  },
  "a06b22b6cadc4082e88a38e3dc4ce9de94963b132e195ef4d3466a030cb63f5b": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4Array",
          "Int4Array",
          "Int4Array"
        ]
      }
    },
    "query": "INSERT INTO game (match_id, score1, score2) SELECT * FROM UNNEST($1::int[], $2::int[], $3::int[])"
  },
  "b14ea0dc593ccfb21f13f14ba80a2d70521d929abc903eeae5788284a08c7ec1": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "DELETE FROM player WHERE id = $1"
  },
  "b5261faa011ef3577519678a8f336386819e128578cbf906b302142d4aaa6192": {
    "describe": {
      "columns": [
        {
          "name": "player_id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "first_name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "rating",
          "ordinal": 3,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "SELECT r.player_id, s.first_name, s.last_name, r.after_rating rating FROM rating r\n            JOIN (\n                SELECT MAX(r.id) rating_id, r.player_id, p.first_name, p.last_name FROM player p\n                JOIN rating r ON r.player_id = p.id\n                GROUP BY r.player_id, p.first_name, p.last_name\n            ) s ON s.rating_id = r.id AND s.player_id = r.player_id\n            ORDER BY rating DESC\n            LIMIT $1 OFFSET $2"
  },
  "b7266cf0b1f18caa7b7a349d5aa4f3618aa1c7bf58b5ec89156dbbe6fd81cc03": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": []
      }
    },
    "query": "DELETE FROM rating"
  },
  "bdbbc18ab6fb478b4fdf16065953ae1307d0e1e3051d2e537dcfdf5494f451cb": {
    "describe": {
      "columns": [
        {
          "name": "player_id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "first_name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "rating",
          "ordinal": 3,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "SELECT r.player_id, p.first_name, p.last_name, r.after_rating rating FROM player p\n            JOIN rating r ON r.player_id = p.id\n            WHERE p.id = $1\n            ORDER BY r.id DESC\n            LIMIT 1"
  },
  "c00fecc2df44adfc0140910df926a62eb5cc19868d146b66fcc7841d92f2847f": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO tournament (name, source) VALUES ($1, $2)"
  },
  "c4526af506f96bb1c10cda5587a5a954121fb085ea8a31d3f90a1dc173786598": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "tournament_id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "winner",
          "ordinal": 3,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "none",
                  "team1",
                  "team2",
                  "draw"
                ]
              },
              "name": "winner"
            }
          }
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Timestamptz",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "none",
                  "team1",
                  "team2",
                  "draw"
                ]
              },
              "name": "winner"
            }
          }
        ]
      }
    },
    "query": "INSERT INTO match (tournament_id, timestamp, winner) VALUES ($1, $2, $3) RETURNING *"
  },
  "e83f080cadc59f0b2dd832fb086b73f31f95009cfae367653790ed5fa7604ded": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int4",
          "Int4",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "team1",
                  "team2"
                ]
              },
              "name": "team"
            }
          }
        ]
      }
    },
    "query": "INSERT INTO player_match (player_id, match_id, team) VALUES ($1, $2, $3)"
  },
  "f7609d810736e49544556a5c4d2a71dd20e94751a2acd16091d39abb4baa47be": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": []
      }
    },
    "query": "TRUNCATE match, player_match, player, game, tournament, rating"
  },
  "f9ea8063ed4c857a89cfb2f217ff9990d074fc5afe3f18226f6c7398cf802c16": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "first_name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "SELECT * FROM player WHERE first_name = $1 AND last_name = $2"
  },
  "fe8c652643257bc59385f79defb13456d0f083f9ed257f8f4496a76769a11965": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Timestamptz"
        ]
      }
    },
    "query": "DELETE FROM rating WHERE match_id IN (SELECT match_id FROM match WHERE timestamp >= $1)"
  },
  "ffd03e44f6c05aaac8e57bf1f547e2eff4b436735f298c6ba152c59f40e3ac05": {
    "describe": {
      "columns": [
        {
          "name": "tournament_name",
          "ordinal": 0,
          "type_info": "Text"
        },
        {
          "name": "id",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "winner",
          "ordinal": 3,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "none",
                  "team1",
                  "team2",
                  "draw"
                ]
              },
              "name": "winner"
            }
          }
        },
        {
          "name": "first_name",
          "ordinal": 4,
          "type_info": "Text"
        },
        {
          "name": "last_name",
          "ordinal": 5,
          "type_info": "Text"
        },
        {
          "name": "before_rating",
          "ordinal": 6,
          "type_info": "Int4"
        },
        {
          "name": "after_rating",
          "ordinal": 7,
          "type_info": "Int4"
        },
        {
          "name": "team",
          "ordinal": 8,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "team1",
                  "team2"
                ]
              },
              "name": "team"
            }
          }
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "SELECT t.name as tournament_name, m.id, m.timestamp, m.winner, p.first_name, p.last_name, r.before_rating, r.after_rating, pm.team FROM match m\n        JOIN player_match pm ON pm.match_id = m.id\n        JOIN rating r on r.match_id = m.id AND r.player_id = pm.player_id\n        JOIN player p on p.id = pm.player_id\n        JOIN tournament t on t.id = m.tournament_id\n        WHERE m.id = $1"
  }
}